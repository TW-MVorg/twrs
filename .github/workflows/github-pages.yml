# workflow 的名稱
name: Deploy Static Pages to GitHub Pages

# 觸發條件：當推送到 main 分支時執行此 workflow
on:
  push:
    branches:
      - main  # 確保與您設定的分支名稱一致
  
  # 允許從 Actions 頁面手動運行此 workflow
  workflow_dispatch:

# 執行任務 (Job)
jobs:
  # 部署任務
  deploy:
    runs-on: ubuntu-latest  # 使用 Ubuntu 環境執行
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}

    permissions:
      contents: read
      pages: write        # 寫入 Pages 內容的權限
      id-token: write     # 身份驗證所需的權限

    steps:
      # 步驟 1: 結帳程式碼
      - name: Checkout
        uses: actions/checkout@v4
      
      # 步驟 2: 設定 GitHub Pages 環境
      - name: Setup Pages
        uses: actions/configure-pages@v5

      # 步驟 3: 上傳 Artifacts（即將部署的檔案）
      # 如果您的靜態檔案在根目錄，請使用 'path: .'
      # 如果您的靜態檔案在 /dist 或 /build 資料夾，請將路徑修改為 path: './dist'
      - name: Upload Artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: '.'  # 這裡使用 '.' 表示將儲存庫根目錄所有內容作為網站檔案

      # 步驟 4: 部署到 GitHub Pages 服務
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
        
